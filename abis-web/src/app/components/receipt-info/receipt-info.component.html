<p>Карточка поступлений</p>

<!--Карточка поступлений, которая состоит из двух табов -->
  <div>
    <button nz-button nzType="primary">Save</button>
    <button nz-button nzType="primary">Cancel changes</button>

    <button nz-button nzType="primary" >Add receipt</button>
    <button nz-button nzType="link" routerLink="/receipts">Back</button>
  
    <div>
      
      <nz-tabset>
        <nz-tab nzTitle="Receipt" [nzDisabled]="(workStatus$ | async)">
         <!--Информация о поступлении в режиме просмотра-->
         <table>
          <tr>
            <th>Id</th>
            <th>Name</th>
            <th>Date Created</th>
            <th>Режим работы</th>
          </tr>

          <tr>
            <td>{{id}}</td>

            <td *ngIf="!(workStatusForReceipt$  | async)">{{receipt.name}}</td>
            <td *ngIf="!(workStatusForReceipt$  | async)">{{receipt.createdDate}}</td>

            <td *ngIf="(workStatusForReceipt$  | async)">
              <input  
              nz-input
              [(ngModel)]="receipt.name"
              nzSize="default" 
              placeholder="enter name"
              type="text" 
              id="name" 
              />
            </td>

            <td *ngIf="(workStatusForReceipt$  | async)">
              <input  
              nz-input
              [(ngModel)]="receipt.createdDate"
              nzSize="default" 
              placeholder="enter date created"
              type="text" 
              id="createdDate" 
              />
            </td>

            <td>
              <button
                    nz-button
                    nzType="link"
                    (click)="viewModeReceipt()"
                    [disabled]="!(workStatusForReceipt$ | async)"
                    >
                    <span nz-icon nzType="info" nzTheme="outline"></span>
                </button>

                <button
                  nz-button
                  nzType="link"
                  (click)="editModeReceipt()"
                  [disabled]="!!(workStatusForReceipt$  | async)"
                >
                <span nz-icon nzType="edit" nzTheme="outline"></span>
              </button>
            </td>
          </tr>

        </table>
        <!-- <p>{{receiptId$ | json}}</p> -->
        <!--Форма редактирования поступления-->
        <!-- <div *ngIf="workStatus$.value == true">
          <form nz-form class="receipt-form" [formGroup]="receiptForm" (ngSubmit)="submitReceiptForm()">
            <nz-form-item>
                <nz-form-label [nzSm]="5" [nzXs]="10" nzRequired nzFor="Name">Name:</nz-form-label>
                <nz-form-control [nzSm]="15" [nzXs]="20" nzErrorTip="The input is not valid Name!">
                    <input  
                        nz-input 
                        nzSize="default" 
                        placeholder="enter Name"
                        type="text" 
                        class="form-control" 
                        id="Name" 
                        formControlName="Name" 
                        />
                </nz-form-control>
            </nz-form-item>
        
            <nz-form-item>
                <nz-form-label [nzSm]="8" [nzXs]="24" nzFor="CreatedDate" nzRequired>Date created:</nz-form-label>
                <nz-form-control [nzSm]="17" [nzXs]="14" nzErrorTip="Please input created date!">
                    <input 
                        nz-input 
                        nzSize="default" 
                        placeholder="enter created date"
                        id="CreatedDate" 
                        formControlName="CreatedDate" 
                    />
                </nz-form-control>
            </nz-form-item>
        </form>
        </div> -->

        <!-- <button nz-button nzType="link" (click)="viewModeReceipt()" [disabled]="!(workStatusForReceipt$ | async)">Режим просмотра</button>
        <button nz-button nzType="link" (click)="editModeReceipt()" [disabled]="!!(workStatusForReceipt$ | async)">Режим редактирования</button> -->

        </nz-tab>

        <nz-tab nzTitle="Instances of receipt" [nzDisabled]="(workStatusForReceipt$ | async)">
           <!--Информация о книгах в режиме просмотра-->
           <nz-table [nzData]="instances">
            <thead>
              <tr>
                <th>index</th>
                <th>Info about book</th>
                <th>Режим работы</th>
              </tr>
            </thead>
  
            <tbody>
              <tr *ngFor="let instance of instances; index as i">

               
                <td>{{i}}</td>

                 <!--Тут будем вызывать форму или ячейку таблицы-->
                <td *ngIf="instance.id != mainId || !(workStatus$ | async)"> {{instance.info}} </td>
                <td *ngIf="instance.id == mainId && !!(workStatus$ | async)">
                  <input  
                    nz-input
                    [(ngModel)]="instance.info"
                    nzSize="default" 
                    placeholder="enter info"
                    type="text" 
                    id="Info" 
                  />
                </td>

                
                <td>

                  <button
                    nz-button
                    nzType="link"
                    (click)="viewMode()"
                    [disabled]="!(workStatus$ | async)"
                    >
                    <span nz-icon nzType="info" nzTheme="outline"></span>
                  </button>
                  
                  <button
                    nz-button
                    nzType="link"
                    (click)="editMode(instance.id)"
                    [disabled]="!!(workStatus$ | async) && instance.id == mainId"
                    >
                    <span nz-icon nzType="edit" nzTheme="outline"></span>
                  </button>

                </td>

              </tr>
            </tbody>
          </nz-table>
        </nz-tab>
      </nz-tabset>
    </div>
  </div>
